<template>
<div id="topbar" class="topbar">
  <div id="topnav" class="topnav pull-right">
    <dropdown tag="div" class="tags">
      <a class="dropdown-toggle" role="button">Admin<span class="caret"></span></a>
      <template slot="dropdown">
        <li><a role="button">个人档案</a></li>
        <li><a role="button">修改密码</a></li>
      </template>
    </dropdown>
    <a class="tags" href="javascript:void(0);" @click="signOut">退出</a>
  </div>
  <h5 class="companyname">{{title}}</h5>
</div>
</template>

<script>
import api from 'src/api'
import cookies from 'js-cookie'
export default {
  name: 'TopHeader',
  data() {
    return { title: '' }
  },
  created() {
    this.title = '壹仟零壹艺网络科技（北京）有限公司项目管理系统'
  },
  methods: {
    signOut() {
      this.$confirm({
        title: '提示',
        okText: '确定',
        cancelText: '取消',
        content: '确定要退出登录吗？'
      }).then(() => {
        this.doSignout()
      }).catch(() => {})
    },
    doSignout() {
      api.post('/signout').then((response) => {
        if (response.code === 200) {
          cookies.remove('user_db')
          this.$router.replace({ path: '/login' })
        } else {
          this.$notify({
            type: 'danger',
            content: response.message
          })
        }
      }).catch((error) => {
        console.log(error)
      })
    }
  }
}
</script>

<style lang="less">
.topbar {
  h5 {
    color: #fc0;
    font-weight: normal;
    margin: 0;
  }
}
.topnav {
  margin-top: -6px;
    .tags{
      float: left;
      .dropdown-menu {
        min-width: auto;
        padding: 5px 0;
         li a{
          padding: 6px 20px;
          font-size: 12px;
          transition: all .3s;
          &:hover{
            background-color: #1e232f;
            color: #fff
          }
        }
      }
    }
    a {
      display: block;
      padding: 3px 6px;
      position: relative;
      color: #d1e4f2;
      text-decoration: none;
      &:hover {
        background-color: #3b465e;
      }
    }
}
</style>
