<template>
  <div>
    <div class="featurebar">
      <ul class="ul">
        <li class="active"><a href="javascript:void(0)">今天</a></li>
        <li><a href="javascript:void(0)">昨天</a></li>
        <li><a href="javascript:void(0)">前天</a></li>
        <li><a href="javascript:void(0)">本周</a></li>
        <li><a href="javascript:void(0)">上周</a></li>
        <li><a href="javascript:void(0)">本月</a></li>
        <li><a href="javascript:void(0)">上月</a></li>
        <li><a href="javascript:void(0)">所有</a></li>
      </ul>
    </div>
    <div class="main">
      <dataTable :tool="tool" :data="logList" :currentPage="currentPage" @pageChange="tableChange" @change="tableChange" :totalPage="20" :columns="columns"></dataTable>
    </div>
  </div>
</template>

<script>
  import { mapGetters } from 'vuex'
  import dataTable from '../../../components/table/table.vue'

  export default {
    name: 'log',
    data () {
      return {
        currentPage: 1,
        tool: [],
        datas: [
          {
            name: '111'
          }
        ],
        columns: [{
          text: '日期',
          key: 'createTime',
          align: 'center',
          width: 150,
          render: (h, params) => {
            let date = new Date(params.createTime)
            let y = 1900 + date.getYear()
            let m = '0' + (date.getMonth() + 1)
            let d = '0' + date.getDate()
            let dates = y + '-' + m.substring(m.length - 2, m.length) + '-' + d.substring(d.length - 2, d.length)
            return dates
          }
        }, {
          text: '操作者',
          key: 'operatorId'
        }, {
          text: '动作',
          key: 'action'
        }, {
          text: '对象类型',
          key: 'type'
        }, {
          text: 'ID',
          key: 'id',
          width: 100
        }, {
          text: '对象名称',
          key: 'content'
        }]
      }
    },
    computed: {
      ...mapGetters({
        logList: 'logList'
      })
    },
    components: {dataTable},
    asyncData ({store}) {
      store.dispatch('isLog')
    },
    methods: {
      tableChange: function (data) {
        console.log(data)
      }
    }
  }
</script>

<style lang="less">

</style>
