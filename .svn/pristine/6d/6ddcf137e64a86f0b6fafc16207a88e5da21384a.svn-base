<template>
  <div class="">
    <div class="featurebar featurebar-right">
      <ul class="ul">
        <li id="undoneTab" class="active">用户列表</li>
        <li><a href="javascript:;" @click="search=!search"><i class="fa fa-search"></i> 搜索</a></li>
      </ul>
    </div>
    <div class="search-main" v-show="search">
      <form class="form-inline">
        <div class="form-group input-group-sm">
          <input type="text" class="form-control" id="searchUser" placeholder="请输入搜索关键字">
        </div>
        <button type="button" class="btn btn-primary btn-sm">搜索</button>
        <div class="fr">
          <a href="javascript:;" class="close" @click="search=!search"><i class="fa fa-close"></i></a>
        </div>
      </form>
    </div>
    <div class="main-no-padding">
      <div class="col-lg-2">
        <panel :title="title" :user="user_prop"></panel>
      </div>
      <div class="col-lg-10">
        <dataTable :tool="tool" :data="user.data" :currentPage="currentPage" @pageChange="tableChange" @change="tableChange" :totalPage="20" :columns="columns"></dataTable>
      </div>
    </div>
  </div>
</template>

<script>
import { mapGetters } from 'vuex'
import panel from '../components/panel.vue'
import dataTable from '../../../components/table/table.vue'

export default {
  name: 'User',
  data () {
    return {
      icon: 'sitemap',
      title: '部门结构',
      user_prop: true,
      search: false,
      currentPage: 1,
      tool: [{
        text: '全选',
        click: function (data) {
          console.log('要批量删除的数据', data)
        }
      }, {
        text: '全选',
        click: function (data) {
          console.log('要批量删除的数据', data)
        }
      }],
      columns: [{
        text: '',
        type: 'selection',
        align: 'center'
      }, {
        text: 'ID',
        key: 'id',
        align: 'center'
      }, {
        text: '真实姓名',
        key: 'name',
        align: 'center'
      }, {
        text: '项目代号',
        key: '',
        align: 'center'
      }, {
        text: '用户名'
      }, {
        text: '职位'
      }, {
        text: '邮箱'
      }, {
        text: '性别'
      }, {
        text: '入职日期'
      }, {
        text: '操作',
        render: (h, params) => {
          return h('div', [
            h('a', {
              attrs: {
                href: '/organization/editUser',
                title: '编辑'
              }
            }, [
              h('span', {
                class: 'glyphicon glyphicon-pencil'
              })
            ]),
            h('a', {
              attrs: {
                href: 'javascript:void(0);',
                title: '删除'
              },
              style: {
                marginLeft: '5px'
              }
            }, [
              h('span', {
                class: 'glyphicon glyphicon-remove'
              })
            ])
          ])
        }
      }]
    }
  },
  computed: {
    ...mapGetters({
      user: 'projectState'
    })
  },
  components: {
    panel,
    dataTable
  },
  asyncData ({ store }) {
    store.dispatch('isProjectState')
  },
  methods: {
    tableChange () {
      /**
        * 分页
       **/
    }
  }
}
</script>
<style lang="less">
.main-no-padding {
  padding: 20px 5px;
  overflow: hidden;
}
.checkbox-all {
  padding-left: 25px;
  line-height: 34px;
}
.art-pagination {
  margin: 0;
  padding: 0;
}
</style>
