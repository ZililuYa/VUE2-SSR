<template>
  <div class="addCompany-container" @keyup.13="submitForm()">
    <div class="login-container-bg"></div>
    <div class="panel panel-default form-company">
      <div class="panel-heading">壹仟零壹艺网络科技（北京）有限公司项目管理系统 -- 创建企业</div>
      <div class="panel-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="name" class="col-sm-3 control-label"><span class="text-danger">* </span> 公司名称</label>
            <div class="col-sm-9">
              <input type="text" v-model="ruleForm.name" class="form-control" id="name" placeholder="公司名称">
            </div>
          </div>
          <div class="form-group">
            <label for="telephone" class="col-sm-3 control-label">联系电话</label>
            <div class="col-sm-9">
              <input type="tel" v-model="ruleForm.telephone" class="form-control" id="telephone" placeholder="联系电话">
            </div>
          </div>
          <div class="form-group">
            <label for="fax" class="col-sm-3 control-label">传真</label>
            <div class="col-sm-9">
              <input type="tel" v-model="ruleForm.fax" class="form-control" id="fax" placeholder="传真">
            </div>
          </div>
          <div class="form-group">
            <label for="address" class="col-sm-3 control-label">通讯地址</label>
            <div class="col-sm-9">
              <input type="text" v-model="ruleForm.address" class="form-control" id="address" placeholder="通讯地址">
            </div>
          </div>
          <div class="form-group">
            <label for="postCode" class="col-sm-3 control-label">邮政编码</label>
            <div class="col-sm-9">
              <input type="tel" v-model="ruleForm.postCode" class="form-control" id="postCode" placeholder="邮政编码">
            </div>
          </div>
          <div class="form-group">
            <label for="officialWebsite" class="col-sm-3 control-label">官网</label>
            <div class="col-sm-9">
              <input type="text" v-model="ruleForm.officialWebsite" class="form-control" id="officialWebsite" placeholder="官网">
            </div>
          </div>
          <div class="form-group">
            <label for="intranet" class="col-sm-3 control-label">内网</label>
            <div class="col-sm-9">
              <input type="text" v-model="ruleForm.intranet" class="form-control" id="intranet" placeholder="内网">
            </div>
          </div>
          <div class="form-group art-btn-group">
            <btn class="" type="primary" @click="submitForm">{{submit.text}}</btn>
            <a href="/user/login" class="btn btn-default">返回</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</template>

<script>
import api from 'src/api'
export default {
  name: 'Login',
  title () {
    return '创建公司'
  },
  data () {
    return {
      submit: {
        loading: false,
        text: '创建企业'
      },
      ruleForm: {
        name: '',
        telephone: '',
        fax: '',
        address: '',
        postCode: '',
        officialWebsite: '',
        intranet: ''
      }
    }
  },
  created () { },
  methods: {
    submits () {
      /**
        * 创建公司
       */
      let vm = this
      const param = vm.ruleForm
      api.post('/v1/company/insert', param).then((response) => {
        if (response.code === 200) {
          vm.submit.text = '创建成功，跳转中...'
          this.$notify({
            type: 'success',
            content: '企业创建成功'
          })
          setTimeout(function () {
            vm.$router.replace({ path: '/' })
          }, 2000)
        } else {
          this.$notify({
            type: 'danger',
            content: response.message
          })
        }
      }).catch((error) => {
        console.log(error)
      })
    },
    submitForm () {
      /**
        * 验证
       */
      let vm = this
      vm.submit.text = '创建中...'
      let nameVal = vm.ruleForm.name.trim()
      // let passwordVal = vm.ruleForm.password.trim()
      if (nameVal === '') {
        this.$notify({
          type: 'danger',
          content: '请输入公司名称!'
        })
        return false
      }
      // if (passwordVal === '') {
      //   this.$notify({
      //     type: 'danger',
      //     content: '请输入密码!'
      //   })
      //   return false
      // }
      vm.submits()
    }
  }
}
</script>
<style lang="less">
.addCompany-container {
  width:100%;
  height:100%;
  padding-top:100px;
}

.form-company {
  max-width: 540px;
  padding: 0;
  margin: 0 auto;
  .panel-heading {
    height: 70px;
    line-height: 70px;
    padding: 0 15px;
    font-weight: 800;
  }
}
</style>
