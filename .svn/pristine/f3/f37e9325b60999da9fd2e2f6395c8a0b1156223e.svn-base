<template>
  <div class="row">
    <div class="panel panel-default art-panel-info">
      <div class="panel-heading">XXXX -> 编辑用户</div>
      <div class="panel-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label"><span class="text-danger">* </span> 帐户名</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="inputEmail3" placeholder="帐户名">
            </div>
          </div>
          <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label"><span class="text-danger">* </span> 真实姓名</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="inputEmail3" placeholder="姓名">
            </div>
          </div>
          <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label"><span class="text-danger">* </span> 邮箱</label>
            <div class="col-sm-10">
              <input type="email" class="form-control" id="exampleInputEmail1" placeholder="邮箱">
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label"><span class="text-danger">* </span> 密码</label>
            <div class="col-sm-10">
              <input type="password" class="form-control" id="inputPassword3" placeholder="Password">
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label"><span class="text-danger">* </span> 所属部门</label>
            <div class="col-sm-10">
              <select class="form-control">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label">职位</label>
            <div class="col-sm-10">
              <select class="form-control">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="form-group art-btn-group">
            <btn class="" type="primary" @click="submits">保存</btn>
            <btn class="">返回</btn>
          </div>
        </form>
      </div>
    </div>
  </div>
</template>

<script>
import { mapGetters } from 'vuex'
import api from 'src/api'

export default {
  name: 'User',
  data () {
    return { }
  },
  computed: {
    ...mapGetters({
      user: 'getUser1'
    })
  },
  components: {},
  // asyncData ({ store }) {
  //   return store.dispatch('getUser', { loginName: 'jiel', passwd: '123456' })
  // },
  methods: {
    submits () {
      const param = { loginName: this.user, passwd: this.pass }
      api.post('/login', param).then((response) => {
        if (response.httpCode === 200) {
          this.$store.commit('USER_DATA', response.data)
          this.$router.replace({ path: '/' })
        } else {
          this.$notify({
            type: 'danger',
            content: '用户名或密码错误!'
          })
        }
      }).catch((error) => {
        console.log(error)
      })
    }
  }
}
</script>
<style>
.art-panel-info {
  width:60%;
  margin:15px auto 30px;
}
.art-btn-group {
  text-align: center;
}
</style>
