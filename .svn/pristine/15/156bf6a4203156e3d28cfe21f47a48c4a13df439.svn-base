<template>
  <div class="">
    <div class="featurebar">
      <ul class="ul">
        <li>
          <span class="badge">{{data.id}}</span>
          <b>{{data.name}}</b>
        </li>
        <li class="fr">
          <router-link to="/project/index"><i class="fa fa-reply"></i></router-link>
        </li>
      </ul>
    </div>
    <div class="main">
      <div class="row-table">
        <div class="col-main">
          <fieldset class="fieldset">
            <legend>任务描述</legend>
            <div class="content" v-html="data.content"></div>
          </fieldset>
          <fieldset class="fieldset">
            <legend>历史记录</legend>
            <logData :data=" data.logList"></logData>
          </fieldset>
          <div class="text-center tool-a">
            <a href="javascript:;"><i class="fa fa-hand-o-right"></i> 指派</a>
            <a href="javascript:;"><i class="fa fa-play"></i> 开始</a>
            <a href="javascript:;"><i class="fa fa-clock-o"></i> 工时</a>
            <a href="javascript:;"><i class="fa fa-close"></i> 关闭</a>
            <a href="javascript:;"><i class="fa fa-edit"></i> 编辑</a>
            <router-link :to="'/project/task/' + data.projectId"><i class="fa fa-reply"></i> 返回</router-link>
          </div>
        </div>
        <div class="col-side">
          <fieldset class="fieldset">
            <legend>基本信息</legend>
            <div class="content">
              <table class="table-content">
                <tbody>
                <tr>
                  <th>所属项目</th>
                  <td>{{data.projectName}}</td>
                </tr>
                <tr>
                  <th>任务名称</th>
                  <td>{{data.name}}</td>
                </tr>
                <tr>
                  <th>指派给</th>
                  <td>{{data.assignedName}}</td>
                </tr>
                <tr>
                  <th>任务类型</th>
                  <td>{{data.type}}</td>
                </tr>
                <tr>
                  <th>任务状态</th>
                  <td>{{data.status}}</td>
                </tr>
                <tr>
                  <th>优先级</th>
                  <td>{{data.priorityId}}</td>
                </tr>
                <tr>
                  <th>抄送给</th>
                  <td></td>
                </tr>
                </tbody>
              </table>
            </div>
          </fieldset>

          <fieldset class="fieldset">
            <legend>工时信息</legend>
            <div class="content">
              <table class="table-content">
                <tbody>
                <tr>
                  <th>预计开始</th>
                  <td></td>
                </tr>
                <tr>
                  <th>实际开始</th>
                  <td></td>
                </tr>
                <tr>
                  <th>截止日期</th>
                  <td></td>
                </tr>
                <tr>
                  <th>最初预计</th>
                  <td></td>
                </tr>
                <tr>
                  <th>总消耗</th>
                  <td></td>
                </tr>
                <tr>
                  <th>预计剩余</th>
                  <td></td>
                </tr>
                </tbody>
              </table>
            </div>
          </fieldset>
          <fieldset class="fieldset">
            <legend>任务的一生</legend>
            <div class="content">
              <table class="table-content">
                <tbody>
                <tr>
                  <th>由谁创建</th>
                </tr>
                <tr>
                  <th>由谁完成</th>
                </tr>
                <tr>
                  <th>由谁取消</th>
                </tr>
                <tr>
                  <th>由谁关闭</th>
                </tr>
                <tr>
                  <th>关闭原因</th>
                </tr>
                <tr>
                  <th>最后编辑</th>
                </tr>
                </tbody>
              </table>
            </div>
          </fieldset>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
  import { mapGetters } from 'vuex'
  import logData from '../../../components/history/logs.vue'

  export default {
    components: {logData},
    data () {
      return {}
    },
    computed: {
      ...mapGetters({
        data: 'projectTaskDetail'
      })
    },
    mounted () {
      setTimeout(() => {
        console.log('服务端接收到的数据：', this.data)
      }, 3000)
    },
    asyncData ({store, route}) {
      store.dispatch('isProjectTaskDetails', route.params.id)
    }
  }
</script>

